<div class="container">
    <div class="content">
        <div class="row mt-3 d-flex justify-content-center">
            <p>
                Дата начала:
                <input id="startDate" class="mb-3" style="margin:15px;"/>
                Дата окончания:
                <input id="endDate" class="mb-3" style="margin:15px;"/>
            </p>
        </div>
        <div class="mt-3 mb-4 d-flex justify-content-center">
            <button type="submit" class="btn" onclick="exportChart()" style="background-color: #FFC23A; font-size: 20px">Сохранить график</button>
        </div>
        <div id="chart"> </div>
    </div>
</div>
<script>
    function exportChart(){
        var chart = $("#chart").getKendoChart();
            chart.exportImage().done(function(data) {
                kendo.saveAs({
                    dataURI: data,
                    fileName: "Отчёт по проведённым мероприятиям.png"
                });
            });
    }

    $(document).ready(function() {
        onFilterChange();
    });
    
    $("#startDate").kendoDatePicker({
        value: new Date('@DateTime.Now.AddMonths(-1).ToString("yyyy-MM-ddTHH:mm:ss")'),
        change: onFilterChange,
        format: "{0:dd/MM/yyyy}"
    });
    
    function onFilterChange() {
        $("#chart").data("kendoChart").dataSource.read();
    }
    
    $("#endDate").kendoDatePicker({
        value: new Date('@DateTime.Now.ToString("yyyy-MM-ddTHH:mm:ss")'),
        change: onFilterChange,
        format: "{0:dd/MM/yyyy}"
    });
    
    $("#chart").kendoChart({
     dataSource: {
        transport: {
           read: { 
               url: "@Url.Action("GetEventByDateFilter", "Admin")",
               data: function () {
                   var dateStart = $("#startDate").data("kendoDatePicker").value();
                   var dateEnd = $("#endDate").data("kendoDatePicker").value();
                   var dateStartConverted = kendo.toString(dateStart, "dd/MM/yyyy");
                   var dateEndConverted = kendo.toString(dateEnd, "dd/MM/yyyy");
                   return {
                       dateStart: kendo.toString(dateStartConverted, "dd/MM/yyyy"),
                       dateEnd: kendo.toString(dateEndConverted, "dd/MM/yyyy")
                   };
               }
           },
        }
        },
        valueAxis: {
              majorUnit: 1
          },
        title: {
            text: "Отчёт по проведённым мероприятиям"
        },
        legend: {
            position: "bottom"
        },
        series: [{
            type: "area",
            field: "count",
            categoryField: "date"
        }],
        tooltip: {
            visible: true,
            template: "Мероприятий проведено : #= value #"
        },
        seriesDefaults: {
            spacing: 1
          },
    });
    </script>